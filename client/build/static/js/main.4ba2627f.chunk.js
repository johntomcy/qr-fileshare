(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{176:function(e,t,n){e.exports=n.p+"static/media/generated_qr.a56d93f3.svg"},184:function(e,t,n){e.exports=n(413)},189:function(e,t,n){},191:function(e,t,n){},366:function(e,t,n){},382:function(e,t,n){},408:function(e,t){},413:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),l=n(27),o=n.n(l),r=(n(189),n(19)),s=n(20),c=n(23),d=n(21),u=n(22),f=(n(191),n(29)),m=n.n(f),h=n(49),p=n.n(h),g=n(178),v=n.n(g),b=n(176),y=n.n(b),E=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(c.a)(this,Object(d.a)(t).call(this))).handleOpen=function(){e.setState({modalIsOpen:!0})},e.handleClose=function(){e.setState({modalIsOpen:!1})},e.state={modalIsOpen:!1},e}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{id:"topBar",style:{background:p.a.main}},i.a.createElement(m.a,{id:"topBarHead",variant:"display2"},"Transfer Files"),i.a.createElement(m.a,{id:"topBarQrLink",onClick:this.handleOpen},"Display QR Code"),i.a.createElement(v.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:this.state.modalIsOpen,onClose:this.handleClose},i.a.createElement("div",null,i.a.createElement("img",{id:"qrCode",src:y.a,alt:"QR Code"}))))}}]),t}(i.a.Component),w=n(57),O=n.n(w),k=n(80),j=n.n(k),I=n(179),F=n.n(I),C=n(180),D=n.n(C),B=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleClick=function(){n.setState({open:!0})},n.handleClose=function(e,t){"clickaway"!==t&&n.setState({open:!1})},n.state={open:!1},n.message=e.message,n.identity=e.identity,n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("button",{onClick:this.handleClick,style:{display:"none"},id:"".concat(this.identity,"SnackbarShowButton")}),i.a.createElement(F.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:this.state.open,autoHideDuration:3e3,onClose:this.handleClose,SnackbarContentProps:{"aria-describedby":"message-id"},message:i.a.createElement("span",{id:"message-id"},this.props.message),action:[i.a.createElement(D.a,{key:"close","aria-label":"Close",color:"inherit",onClick:this.handleClose},i.a.createElement(j.a,{style:{fontSize:"16px",lineHeight:"100%"}},"close"))]}))}}]),t}(i.a.Component),S=n(181),x={position:"fixed",bottom:"16px",right:"16px"},N=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(c.a)(this,Object(d.a)(t).call(this))).fileInputChange=function(){var t=e.state.uploadingFiles;t.push(!0),e.setState({uploadingFiles:t});var n=document.getElementById("fileUploadForm"),a=new FormData(n);fetch("/api/files",{method:"post",body:a}).then(function(t){document.getElementById("uploadedSnackbarShowButton").click(),document.getElementById("fileHiddenInput").value="";var n=e.state.uploadingFiles;n.splice(0,1),e.setState({uploadingFiles:n})})},e.state={uploadingFiles:[]},e}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(O.a,{variant:"fab",color:"secondary","aria-label":"add",style:x,onClick:M},0!==this.state.uploadingFiles.length?i.a.createElement(S.CircularProgress,{variant:"indeterminate",style:{color:"#FFF"},size:30,thickness:5}):i.a.createElement(j.a,null,"add")),i.a.createElement("form",{action:"#",id:"fileUploadForm"},i.a.createElement("input",{type:"file",id:"fileHiddenInput",name:"file",hidden:!0,multiple:!0,onChange:this.fileInputChange})),i.a.createElement(B,{message:"File Uploaded",identity:"uploaded"}))}}]),t}(a.Component),M=function(){document.getElementById("fileHiddenInput").click()},P=N,L=n(42),T=n.n(L),W=n(56),z=n.n(W),U=n(58),H=n.n(U),R=(n(366),n(182)),Q=n.n(R);var A=function(e){for(var t,n="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=new Uint8Array(e),l=i.byteLength,o=l%3,r=l-o,s=0;s<r;s+=3)n+=a[(16515072&(t=i[s]<<16|i[s+1]<<8|i[s+2]))>>18]+a[(258048&t)>>12]+a[(4032&t)>>6]+a[63&t];return 1===o?n+=a[(252&(t=i[r]))>>2]+a[(3&t)<<4]+"==":2===o&&(n+=a[(64512&(t=i[r]<<8|i[r+1]))>>10]+a[(1008&t)>>4]+a[(15&t)<<2]+"="),n},G=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).generateDataURI=function(){return"data:".concat(n.mimeType,";base64,").concat(A(n.data))},n.onMouseOver=function(){n.setState({shadow:3})},n.onMouseOut=function(){n.setState({shadow:1})},n.formatBytes=function(e,t){if(0===e)return"0 Bytes";var n=t||2,a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(n))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][a]},n.downloadFile=function(){n.setDownloadFileId(n.file.id,function(){document.getElementById("fileDownloadLink").click()})},n.deleteFile=function(e){e.stopPropagation();fetch("/api/file/".concat(n.file.id),{method:"delete"}).then(function(e){document.getElementById("deletedSnackbarShowButton").click()})},n.file=e.file,n.fileName=e.file.originalname,n.size=e.file.size,n.isPreviewable=!0,e.file.buffer?n.data=e.file.buffer.data:n.isPreviewable=!1,n.mimeType=e.file.mimetype,n.setDownloadFileId=e.setDownloadFileId,n.state={shadow:1},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(Q.a,{title:this.fileName},i.a.createElement(H.a,{onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,onClick:this.downloadFile,className:"fileCard "+(!this.isPreviewable&&"noImage"),elevation:this.state.shadow},i.a.createElement(T.a,{container:!0,spacing:0},i.a.createElement(T.a,{item:!0,className:"details",xs:7},i.a.createElement(U.CardContent,{className:"fileCardContent "+(this.isPreviewable?"":"noImage")},i.a.createElement(m.a,{className:"fileName",variant:"subheading",color:"inherit",noWrap:!0,style:{maxWidth:"calc(100% - 32px)"}},i.a.createElement("span",{className:"fileNameText"},this.fileName)),i.a.createElement("div",{className:"fileDetails"},i.a.createElement(m.a,{variant:"body1",color:"textSecondary"},this.formatBytes(this.size)))),i.a.createElement(U.CardActions,null,i.a.createElement(O.a,{size:"small",color:"secondary",onClick:this.deleteFile},"Delete"))),i.a.createElement(T.a,{item:!0,className:"details",xs:5},this.isPreviewable&&i.a.createElement(U.CardMedia,{image:this.generateDataURI(this.file),className:"fileCardImage"}))))))}}]),t}(a.Component),J=(n(382),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).files=e.files,n.fetchingFiles=e.fetchingFiles,n.setDownloadFileId=e.setDownloadFileId,n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.files=e.files,this.fetchingFiles=e.fetchingFiles}},{key:"render",value:function(){var e=this;if(this.fetchingFiles)return i.a.createElement(z.a,{elevation:4,className:"fileListPaper"},i.a.createElement(m.a,{color:"textSecondary"},"Loading..."));var t=this.files.map(function(t){return i.a.createElement(T.a,{item:!0,key:t.id,className:"fileListGridItem",xs:12,md:6},i.a.createElement(G,{file:t,setDownloadFileId:e.setDownloadFileId}))});return t.length?i.a.createElement("div",null,i.a.createElement("div",{id:"fileListTopBackground",style:{background:p.a.main}}),i.a.createElement(T.a,{id:"fileListGrid",container:!0,justify:"flex-start",spacing:8,alignItems:"center"},t)):i.a.createElement(z.a,{elevation:4,className:"fileListPaper"},i.a.createElement(m.a,null,"You have no files uploaded yet. Start by uploading one."))}}]),t}(a.Component)),q=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).fileId=e.fileId,n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillUpdate",value:function(e){this.fileId=e.fileId}},{key:"render",value:function(){var e="/api/file/".concat(this.fileId);return i.a.createElement("a",{href:e,download:!0,id:"fileDownloadLink"})}}]),t}(a.Component),Y=n(118),K=n(183),Z=n.n(K),V=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(c.a)(this,Object(d.a)(t).call(this))).onDrop=function(e){e.preventDefault(),document.getElementById("fileHiddenInput").files=e.dataTransfer.files},e.onDragOver=function(e){e.preventDefault()},e.state={files:[]},e.style={position:"fixed",top:0,left:0,height:"100vh",width:"100%",visibility:"visible",zIndex:-1},e}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{style:this.style,onDrop:this.onDrop,onDragOver:this.onDragOver})}}]),t}(a.Component),X=Object(Y.createMuiTheme)({palette:{primary:p.a}}),$=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(c.a)(this,Object(d.a)(t).call(this))).state={updateToggle:!1,files:[],fetchingFiles:!0,downloadFileId:null},e}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.socket=Z.a.connect("/"),this.socket.on("file list update",function(t){t=JSON.parse(t),e.setState({files:t})}),_().then(function(t){e.setState({files:t,fetchingFiles:!1})})}},{key:"setDownloadFileId",value:function(e,t){this.setState({downloadFileId:e},t),this.setState({})}},{key:"render",value:function(){return i.a.createElement(Y.MuiThemeProvider,{theme:X},i.a.createElement(V,null),i.a.createElement(E,null),i.a.createElement(J,{files:this.state.files,fetchingFiles:this.state.fetchingFiles,setDownloadFileId:this.setDownloadFileId.bind(this)}),i.a.createElement(P,null),i.a.createElement(B,{message:"File Deleted",identity:"deleted"}),i.a.createElement(q,{fileId:this.state.downloadFileId}))}}]),t}(a.Component),_=function(){return fetch("/api/files/").then(function(e){return e.json()})},ee=$,te=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ne(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(i.a.createElement(ee,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");te?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ne(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):ne(e)})}}()}},[[184,2,1]]]);
//# sourceMappingURL=main.4ba2627f.chunk.js.map